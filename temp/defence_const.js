var y = function() {
    function DefenseConst() {}
    return DefenseConst.ITEMS_KEEP_$LI$ = function() {
        return null == DefenseConst.ITEMS_KEEP && (DefenseConst.ITEMS_KEEP = [5, 5, 5]),
        DefenseConst.ITEMS_KEEP
    }
    ,
    DefenseConst.LEVELS_KEEP_$LI$ = function() {
        return null == DefenseConst.LEVELS_KEEP && (DefenseConst.LEVELS_KEEP = [1, 2, 3]),
        DefenseConst.LEVELS_KEEP
    }
    ,
    DefenseConst.ITEMS_SUPPORT_TOOLS_$LI$ = function() {
        return null == DefenseConst.ITEMS_SUPPORT_TOOLS && (DefenseConst.ITEMS_SUPPORT_TOOLS = [6, 6, 6]),
        DefenseConst.ITEMS_SUPPORT_TOOLS
    }
    ,
    DefenseConst.LEVELS_SUPPORT_TOOLS_HOME_DWORKSHOP_$LI$ = function() {
        return null == DefenseConst.LEVELS_SUPPORT_TOOLS_HOME_DWORKSHOP && (DefenseConst.LEVELS_SUPPORT_TOOLS_HOME_DWORKSHOP = [4, 4, 4]),
        DefenseConst.LEVELS_SUPPORT_TOOLS_HOME_DWORKSHOP
    }
    ,
    DefenseConst.ITEMS_LEFTWALL_$LI$ = function() {
        return null == DefenseConst.ITEMS_LEFTWALL && (DefenseConst.ITEMS_LEFTWALL = [1, 1, 1, 1]),
        DefenseConst.ITEMS_LEFTWALL
    }
    ,
    DefenseConst.LEVELS_LEFTWALL_$LI$ = function() {
        return null == DefenseConst.LEVELS_LEFTWALL && (DefenseConst.LEVELS_LEFTWALL = [1, 2, 3, 5]),
        DefenseConst.LEVELS_LEFTWALL
    }
    ,
    DefenseConst.ITEMS_SKILLS_LEFTWALL_$LI$ = function() {
        return null == DefenseConst.ITEMS_SKILLS_LEFTWALL && (DefenseConst.ITEMS_SKILLS_LEFTWALL = [1]),
        DefenseConst.ITEMS_SKILLS_LEFTWALL
    }
    ,
    DefenseConst.LEVELS_SKILLS_LEFTWALL_$LI$ = function() {
        return null == DefenseConst.LEVELS_SKILLS_LEFTWALL && (DefenseConst.LEVELS_SKILLS_LEFTWALL = [506]),
        DefenseConst.LEVELS_SKILLS_LEFTWALL
    }
    ,
    DefenseConst.ITEMS_MIDDLEWALL_$LI$ = function() {
        return null == DefenseConst.ITEMS_MIDDLEWALL && (DefenseConst.ITEMS_MIDDLEWALL = [1, 2, 1, 1, 2, 1]),
        DefenseConst.ITEMS_MIDDLEWALL
    }
    ,
    DefenseConst.LEVELS_MIDDLEWALL_$LI$ = function() {
        return null == DefenseConst.LEVELS_MIDDLEWALL && (DefenseConst.LEVELS_MIDDLEWALL = [2, 2, 3, 5, 6, 9]),
        DefenseConst.LEVELS_MIDDLEWALL
    }
    ,
    DefenseConst.PLAYER_LEVEL_WALL_$LI$ = function() {
        return null == DefenseConst.PLAYER_LEVEL_WALL && (DefenseConst.PLAYER_LEVEL_WALL = [1, 11, 24]),
        DefenseConst.PLAYER_LEVEL_WALL
    }
    ,
    DefenseConst.PLAYER_LEVEL_GATE_$LI$ = function() {
        return null == DefenseConst.PLAYER_LEVEL_GATE && (DefenseConst.PLAYER_LEVEL_GATE = [1, 11, 24]),
        DefenseConst.PLAYER_LEVEL_GATE
    }
    ,
    DefenseConst.ITEMS_RIGHTWALL_$LI$ = function() {
        return null == DefenseConst.ITEMS_RIGHTWALL && (DefenseConst.ITEMS_RIGHTWALL = [1, 1, 1, 1]),
        DefenseConst.ITEMS_RIGHTWALL
    }
    ,
    DefenseConst.LEVELS_RIGHTWALL_$LI$ = function() {
        return null == DefenseConst.LEVELS_RIGHTWALL && (DefenseConst.LEVELS_RIGHTWALL = [1, 2, 3, 5]),
        DefenseConst.LEVELS_RIGHTWALL
    }
    ,
    DefenseConst.ITEMS_SKILLS_RIGHTWALL_$LI$ = function() {
        return null == DefenseConst.ITEMS_SKILLS_RIGHTWALL && (DefenseConst.ITEMS_SKILLS_RIGHTWALL = [1]),
        DefenseConst.ITEMS_SKILLS_RIGHTWALL
    }
    ,
    DefenseConst.LEVELS_SKILLS_RIGHTWALL_$LI$ = function() {
        return null == DefenseConst.LEVELS_SKILLS_RIGHTWALL && (DefenseConst.LEVELS_SKILLS_RIGHTWALL = [506]),
        DefenseConst.LEVELS_SKILLS_RIGHTWALL
    }
    ,
    DefenseConst.ITEMS_LEFTMOAT_$LI$ = function() {
        return null == DefenseConst.ITEMS_LEFTMOAT && (DefenseConst.ITEMS_LEFTMOAT = [4]),
        DefenseConst.ITEMS_LEFTMOAT
    }
    ,
    DefenseConst.LEVELS_LEFTMOAT_$LI$ = function() {
        return null == DefenseConst.LEVELS_LEFTMOAT && (DefenseConst.LEVELS_LEFTMOAT = [1]),
        DefenseConst.LEVELS_LEFTMOAT
    }
    ,
    DefenseConst.ITEMS_MIDDLEMOAT_$LI$ = function() {
        return null == DefenseConst.ITEMS_MIDDLEMOAT && (DefenseConst.ITEMS_MIDDLEMOAT = [4]),
        DefenseConst.ITEMS_MIDDLEMOAT
    }
    ,
    DefenseConst.LEVELS_MIDDLEMOAT_$LI$ = function() {
        return null == DefenseConst.LEVELS_MIDDLEMOAT && (DefenseConst.LEVELS_MIDDLEMOAT = [1]),
        DefenseConst.LEVELS_MIDDLEMOAT
    }
    ,
    DefenseConst.ITEMS_RIGHTMOAT_$LI$ = function() {
        return null == DefenseConst.ITEMS_RIGHTMOAT && (DefenseConst.ITEMS_RIGHTMOAT = [4]),
        DefenseConst.ITEMS_RIGHTMOAT
    }
    ,
    DefenseConst.LEVELS_RIGHTMOAT_$LI$ = function() {
        return null == DefenseConst.LEVELS_RIGHTMOAT && (DefenseConst.LEVELS_RIGHTMOAT = [1]),
        DefenseConst.LEVELS_RIGHTMOAT
    }
    ,
    DefenseConst.ITEMS_LEFTWALL_FACTION_$LI$ = function() {
        return null == DefenseConst.ITEMS_LEFTWALL_FACTION && (DefenseConst.ITEMS_LEFTWALL_FACTION = [1, 1, 1]),
        DefenseConst.ITEMS_LEFTWALL_FACTION
    }
    ,
    DefenseConst.LEVELS_LEFTWALL_FACTION_$LI$ = function() {
        return null == DefenseConst.LEVELS_LEFTWALL_FACTION && (DefenseConst.LEVELS_LEFTWALL_FACTION = [1, 2, 3]),
        DefenseConst.LEVELS_LEFTWALL_FACTION
    }
    ,
    DefenseConst.ITEMS_MIDDLEWALL_FACTION_$LI$ = function() {
        return null == DefenseConst.ITEMS_MIDDLEWALL_FACTION && (DefenseConst.ITEMS_MIDDLEWALL_FACTION = [1, 2, 1, 1, 2]),
        DefenseConst.ITEMS_MIDDLEWALL_FACTION
    }
    ,
    DefenseConst.LEVELS_MIDDLEWALL_FACTION_$LI$ = function() {
        return null == DefenseConst.LEVELS_MIDDLEWALL_FACTION && (DefenseConst.LEVELS_MIDDLEWALL_FACTION = [2, 2, 3, 5, 6]),
        DefenseConst.LEVELS_MIDDLEWALL_FACTION
    }
    ,
    DefenseConst.ITEMS_RIGHTWALL_FACTION_$LI$ = function() {
        return null == DefenseConst.ITEMS_RIGHTWALL_FACTION && (DefenseConst.ITEMS_RIGHTWALL_FACTION = [1, 1, 1]),
        DefenseConst.ITEMS_RIGHTWALL_FACTION
    }
    ,
    DefenseConst.LEVELS_RIGHTWALL_FACTION_$LI$ = function() {
        return null == DefenseConst.LEVELS_RIGHTWALL_FACTION && (DefenseConst.LEVELS_RIGHTWALL_FACTION = [1, 2, 3]),
        DefenseConst.LEVELS_RIGHTWALL_FACTION
    }
    ,
    DefenseConst.getFixedPrctOnSide = function(e) {
        return Math.round(25 - 2e3 / (e + 80))
    }
    ,
    DefenseConst.getIndicesOfMaxToMinSorting = function(e) {
        var t = [0, 1, 2];
        return e[t[0]] > e[t[1]] ? e[t[2]] > e[t[0]] ? (t[0] = 2,
        t[1] = 0,
        t[2] = 1) : e[t[2]] > e[t[1]] && (t[1] = 2,
        t[2] = 1) : e[t[1]] > e[t[2]] ? e[t[0]] > e[t[2]] ? (t[0] = 1,
        t[1] = 0) : (t[0] = 1,
        t[1] = 2,
        t[2] = 0) : (t[0] = 2,
        t[2] = 0),
        t
    }
    ,
    DefenseConst.getSideUnitCount = function(e, t) {
        var n = [1 * e * t[DefenseConst.SIDE_LEFT] / 100, 1 * e * t[DefenseConst.SIDE_MIDDLE] / 100, 1 * e * t[DefenseConst.SIDE_RIGHT] / 100]
          , i = new Array(3);
        i[0] = 0 | n[0],
        i[1] = 0 | n[1],
        i[2] = 0 | n[2];
        var a = new Array(3);
        a[0] = n[0] - i[0],
        a[1] = n[1] - i[1],
        a[2] = n[2] - i[2];
        var s = Math.round(a[0] + a[1] + a[2]);
        if (s > 0)
            for (var r = DefenseConst.getIndicesOfMaxToMinSorting(a), o = 0; o < s; o++) {
                i[r[o]]++
            }
        return i
    }
    ,
    DefenseConst.calculateCastleDefense = function(e, t, n, i, a) {
        var s = n.getTotalAmount();
        e = 0 | Math.ceil(e * (1 + t / 100));
        for (var r, o, l = Math.min(e, s), u = DefenseConst.getSideUnitCount(l, i), c = n.getMeleeCount(), _ = n.getRangedCount(), d = new Array(3), m = new Array(3), p = new Array(3), h = new Array(3), g = 0, E = 0, f = 0; f < 3; f++)
            p[f] = u[f] * a[f] / 100,
            h[f] = u[f] - p[f],
            g += p[f],
            E += h[f];
        if (r = 0 | g,
        o = 0 | E,
        g > c)
            for (var C = 0; C < 3; C++)
                p[C] = 0 === r ? 0 : c * p[C] / g,
                h[C] = u[C] - p[C];
        else if (E > _)
            for (var T = 0; T < 3; T++)
                h[T] = 0 === o ? 0 : _ * h[T] / E,
                p[T] = u[T] - h[T];
        for (var S = 0; S < 3; S++)
            d[S] = 0 | p[S],
            m[S] = 0 | h[S];
        for (var y = new Array(3), I = 0; I < 3; I++)
            y[I] = p[I] - d[I];
        for (var v = new Array(3), A = 0; A < 3; A++)
            v[A] = h[A] - m[A];
        for (var O = y[0] + y[1] + y[2] + .5 | 0, L = v[0] + v[1] + v[2] + .49999 | 0, b = new Array(3), N = 0; N < 3; N++)
            b[N] = d[N] + m[N] === u[N];
        for (var D, R = DefenseConst.getIndicesOfMaxToMinSorting(y), P = 0; P < 3 && (D = R[P],
        !(O <= 0)); P++)
            b[D] || (d[D]++,
            O--,
            b[D] = d[D] + m[D] === u[D]);
        R = DefenseConst.getIndicesOfMaxToMinSorting(v);
        for (var M = 0; M < 3 && (D = R[M],
        !(L <= 0)); M++)
            b[D] || (m[D]++,
            L--,
            b[D] = d[D] + m[D] === u[D]);
        for (var B = 2 * n.getUnitTypeCount(), F = new ye(B), U = 0, w = n.getSoldierMeleeDefenseOrder(), k = 0; k < w.length; k++) {
            var G = w[k]
              , x = n.getItemAmount(G)
              , V = d[0] + d[1] + d[2]
              , W = Math.min(x, V);
            if (V > 0 && W > 0) {
                var H = W - (K = 0 | Math.round(1 * W * d[DefenseConst.SIDE_LEFT] / V)) - (Y = 0 | Math.round(1 * W * d[DefenseConst.SIDE_RIGHT] / V - 1e-4));
                n.removeItem(G, W),
                F.leftSide[U] = G,
                F.leftSide[U + 1] = K,
                F.middleSide[U] = G,
                F.middleSide[U + 1] = H,
                F.rightSide[U] = G,
                F.rightSide[U + 1] = Y,
                U += 2,
                d[DefenseConst.SIDE_LEFT] -= K,
                d[DefenseConst.SIDE_MIDDLE] -= H,
                d[DefenseConst.SIDE_RIGHT] -= Y
            }
        }
        for (var j = n.getSoldierRangedDefenseOrder(), q = 0; q < j.length; q++) {
            G = j[q],
            x = n.getItemAmount(G),
            V = m[0] + m[1] + m[2],
            W = Math.min(x, V);
            if (V > 0 && W > 0) {
                var K, Y;
                H = W - (K = 0 | Math.round(1 * W * m[DefenseConst.SIDE_LEFT] / V)) - (Y = 0 | Math.round(1 * W * m[DefenseConst.SIDE_RIGHT] / V - 1e-4));
                n.removeItem(G, W),
                F.leftSide[U] = G,
                F.leftSide[U + 1] = K,
                F.middleSide[U] = G,
                F.middleSide[U + 1] = H,
                F.rightSide[U] = G,
                F.rightSide[U + 1] = Y,
                U += 2,
                m[DefenseConst.SIDE_LEFT] -= K,
                m[DefenseConst.SIDE_MIDDLE] -= H,
                m[DefenseConst.SIDE_RIGHT] -= Y
            }
        }
        for (var z = U; z < B; z++)
            F.leftSide[z] = -1,
            F.middleSide[z] = -1,
            F.rightSide[z] = -1;
        return F
    }
    ,
    DefenseConst
}();